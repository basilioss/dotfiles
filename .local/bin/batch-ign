#!/usr/bin/env bash
#
# Description: Apply all the available palettes from ImageGoNerd to the image
# Name: batch-ign
# Usage: batch-ign <path/to/image.png>
# Homepage: https://github.com/basilioss/dotfile
# https://github.com/Schrodinger-Hat/ImageGoNord

# Path to source code of ImageGoNerd
image_go_nerd="$HOME/.local/src/image-go-nord/"
# Remove leading directory portions from a path to the image
file="$(basename "$1")"
# Remove image extension
filename="${file%%.*}"
colorschames=($(ls "$image_go_nerd"/src/palettes))
count=0

mkdir "$HOME/wal-$filename"
cd "$HOME/wal-$filename" || exit

# Color schames to lowercase
for i in "${colorschames[@]}"; do
    colorschames[$count]="$(printf "$i" | tr [:upper:] [:lower:])"
    count=$((count + 1))
done

for i in "${colorschames[@]}"; do
    python "$image_go_nerd"/src/cli.py --"$i" -i="$1" -o="$filename-$i"
done
